{% extends "main.html" %}

<!-- prettier-ignore -->
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'styles/vendoreval.css' %}" />
<section class="vendor__evaluation">
  <div class="vendor__evaluation--metric--box">
    <div class="vendor__evaluation--metric--box--vendor--info">
      <h1 id="vname">{{vendor.name}}</h1>
      <span>Vendor Name</span>
    </div>
    <div class="vendor__evaluation--metric--box--vendor--info">
      <h1 id="vname">{{vendor.vendor_code}}</h1>
      <span>Vendor code</span>
    </div>
    <div class="vendor__evaluation--metric--box--vendor--info">
      <h1 id="vname">{{fulfillement_rate|floatformat:2 }}%</h1>
      <span>Fulfillement rate</span>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Value</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Vendor's On time delivery rate</td>
        <td>
          {{otdr|floatformat:2}}% (Early:{{otd.count}} Late:{{late_delivery}}
          Total:{{allpo.count}})
        </td>
      </tr>
      <tr>
        <td>Vendor's quality rating average</td>
        <td>{{quality_avg_rating|floatformat:2}}%</td>
      </tr>
      <tr>
        <td>Vendor's average response time</td>
        <td>
          <!-- prettier-ignore -->
          {% if average_response_time %}
            {% if average_response_time == 1 %} 
            {{average_response_time}} day 
            {% elif average_response_time > 1 %} 
            {{average_response_time}} days {%endif %}
          {% else %}
           NA
           {% endif %}
        </td>
      </tr>
      <tr>
        <td>Vendor's fulfillment rate</td>
        <td>{{fulfillement_rate|floatformat:2 }}%</td>
      </tr>
      <tr>
        <td>Vendor's completed orders</td>
        <td>{{cpo.count}}</td>
      </tr>
      <tr>
        <td>Vendor's pending orders</td>
        <td>{{ppo.count}}</td>
      </tr>
      <tr>
        <td>Vendor's cancelled orders</td>
        <td>{{ppo.count}}</td>
      </tr>
      <tr>
        <td>Vendor's total orders</td>
        <td>{{allpo.count}}</td>
      </tr>
    </tbody>
  </table>
  <br />
  <p id="po__head">Purchase Orders by {{vendor.name}}</p>
  <br />
  <hr />

  <section class="vendor__po">
    {% for po in po_by_vendors %}
    <!-- prettier-ignore -->
    <div class="ongoing__orders--card">
      <div class="ongoing__orders--card--items card">
        <span id="order">{{po.status}}</span>
        <p id="order-sub">Items</p>
      </div>
      <div class="ongoing__orders--card--items card">
        <span id="order">{{po.order_date|date:"SHORT_DATE_FORMAT"}}</span>
        <p id="order-sub">Orderd on</p>
      </div>
      <div class="ongoing__orders--card--items card">
        <span id="order">{{po.delivery_date|date:"SHORT_DATE_FORMAT"}}</span>
        <p id="order-sub">Delivery date</p>
      </div>
      <div class="ongoing__orders--card--items card">
        <span id="order">{{po.vendor.name}}</span>
        <p id="order-sub">Vendor</p>
      </div>
      <div class="ongoing__orders--card--items card">
        <span id="order">{{po.status}}</span>
        <p id="order-sub">Staus</p>
      </div>
      <div class="ongoing__orders--card--items card">
        <span id="order">{{po.po_number}}</span>
        <p id="order-sub">PO number</p>
      </div>
      <div class="ongoing__orders--card--items card">
        <span id="order"
          >{{po.acknowledgment_date|date:"SHORT_DATE_FORMAT"}}</span
        >
        <p id="order-sub">Acknowledgement date</p>
      </div>
      <div class="ongoing__orders--card--items card quality--rating--d">
        <span id="order">{{po.quality_rating}}%</span>
        <p id="order-sub">Quality rating</p>
      </div>
    </div>

    <!--  -->
    {% endfor %}
    <br />
  </section>
</section>

{% endblock content %}
